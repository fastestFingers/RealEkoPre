import { W as WebPlugin } from "./index.61ed5618.js";
class FacebookLoginWeb extends WebPlugin {
  async initialize(options) {
    const defaultOptions = { version: "v17.0" };
    await this.loadScript(options.locale);
    return FB.init(Object.assign(Object.assign({}, defaultOptions), options));
  }
  loadScript(locale) {
    if (typeof document === "undefined") {
      return Promise.reject("document global not found");
    }
    const scriptId = "fb";
    const scriptEl = document.getElementById(scriptId);
    if (scriptEl) {
      return Promise.resolve();
    }
    const head = document.getElementsByTagName("head")[0];
    const script = document.createElement("script");
    return new Promise((resolve) => {
      script.onload = () => resolve();
      script.defer = true;
      script.async = true;
      script.id = scriptId;
      script.src = `https://connect.facebook.net/${locale !== null && locale !== void 0 ? locale : "en_US"}/sdk.js`;
      head.appendChild(script);
    });
  }
  async login(options) {
    return new Promise((resolve, reject) => {
      FB.login((response) => {
        if (response.status === "connected") {
          resolve({
            accessToken: {
              token: response.authResponse.accessToken
            }
          });
        } else {
          reject({
            accessToken: {
              token: null
            }
          });
        }
      }, { scope: options.permissions.join(",") });
    });
  }
  async logout() {
    return new Promise((resolve) => FB.logout(() => resolve()));
  }
  async reauthorize() {
    return new Promise((resolve) => FB.reauthorize((it) => resolve(it)));
  }
  async getCurrentAccessToken() {
    return new Promise((resolve, reject) => {
      FB.getLoginStatus((response) => {
        if (response.status === "connected") {
          const result = {
            accessToken: {
              applicationId: void 0,
              declinedPermissions: [],
              expires: void 0,
              isExpired: void 0,
              lastRefresh: void 0,
              permissions: [],
              token: response.authResponse.accessToken,
              userId: response.authResponse.userID
            }
          };
          resolve(result);
        } else {
          reject({
            accessToken: {
              token: null
            }
          });
        }
      });
    });
  }
  async getProfile(options) {
    const fields = options.fields.join(",");
    return new Promise((resolve, reject) => {
      FB.api("/me", { fields }, (response) => {
        if (response.error) {
          reject(response.error.message);
          return;
        }
        resolve(response);
      });
    });
  }
  async logEvent() {
    return Promise.resolve();
  }
  async setAutoLogAppEventsEnabled() {
    return Promise.resolve();
  }
  async setAdvertiserTrackingEnabled() {
    return Promise.resolve();
  }
  async setAdvertiserIDCollectionEnabled() {
    return Promise.resolve();
  }
}
export { FacebookLoginWeb };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViLjAwMjRmMWEzLmpzIiwic291cmNlcyI6WyIuLi8uLi9ub2RlX21vZHVsZXMvQGNhcGFjaXRvci1jb21tdW5pdHkvZmFjZWJvb2stbG9naW4vZGlzdC9lc20vd2ViLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFdlYlBsdWdpbiB9IGZyb20gJ0BjYXBhY2l0b3IvY29yZSc7XG5leHBvcnQgY2xhc3MgRmFjZWJvb2tMb2dpbldlYiBleHRlbmRzIFdlYlBsdWdpbiB7XG4gICAgYXN5bmMgaW5pdGlhbGl6ZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0geyB2ZXJzaW9uOiAndjE3LjAnIH07XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNjcmlwdChvcHRpb25zLmxvY2FsZSk7XG4gICAgICAgIHJldHVybiBGQi5pbml0KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMpLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIGxvYWRTY3JpcHQobG9jYWxlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ2RvY3VtZW50IGdsb2JhbCBub3QgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzY3JpcHRJZCA9ICdmYic7XG4gICAgICAgIGNvbnN0IHNjcmlwdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2NyaXB0SWQpO1xuICAgICAgICBpZiAoc2NyaXB0RWwpIHtcbiAgICAgICAgICAgIC8vIGFscmVhZHkgbG9hZGVkXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBzY3JpcHQub25sb2FkID0gKCkgPT4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgc2NyaXB0LmRlZmVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgICAgICAgICBzY3JpcHQuaWQgPSBzY3JpcHRJZDtcbiAgICAgICAgICAgIHNjcmlwdC5zcmMgPSBgaHR0cHM6Ly9jb25uZWN0LmZhY2Vib29rLm5ldC8ke2xvY2FsZSAhPT0gbnVsbCAmJiBsb2NhbGUgIT09IHZvaWQgMCA/IGxvY2FsZSA6ICdlbl9VUyd9L3Nkay5qc2A7XG4gICAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBsb2dpbihvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBGQi5sb2dpbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiByZXNwb25zZS5hdXRoUmVzcG9uc2UuYWNjZXNzVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgeyBzY29wZTogb3B0aW9ucy5wZXJtaXNzaW9ucy5qb2luKCcsJykgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBsb2dvdXQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IEZCLmxvZ291dCgoKSA9PiByZXNvbHZlKCkpKTtcbiAgICB9XG4gICAgYXN5bmMgcmVhdXRob3JpemUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IEZCLnJlYXV0aG9yaXplKGl0ID0+IHJlc29sdmUoaXQpKSk7XG4gICAgfVxuICAgIGFzeW5jIGdldEN1cnJlbnRBY2Nlc3NUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIEZCLmdldExvZ2luU3RhdHVzKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uSWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsaW5lZFBlcm1pc3Npb25zOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFeHBpcmVkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFJlZnJlc2g6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uczogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHJlc3BvbnNlLmF1dGhSZXNwb25zZS5hY2Nlc3NUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHJlc3BvbnNlLmF1dGhSZXNwb25zZS51c2VySUQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0UHJvZmlsZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkcyA9IG9wdGlvbnMuZmllbGRzLmpvaW4oJywnKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIEZCLmFwaSgnL21lJywgeyBmaWVsZHMgfSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UuZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGxvZ0V2ZW50KCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGFzeW5jIHNldEF1dG9Mb2dBcHBFdmVudHNFbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGFzeW5jIHNldEFkdmVydGlzZXJUcmFja2luZ0VuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgYXN5bmMgc2V0QWR2ZXJ0aXNlcklEQ29sbGVjdGlvbkVuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD13ZWIuanMubWFwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDTyxNQUFNLHlCQUF5QixVQUFVO0FBQUEsRUFDNUMsTUFBTSxXQUFXLFNBQVM7QUFDdEIsVUFBTSxpQkFBaUIsRUFBRSxTQUFTO0FBQ2xDLFVBQU0sS0FBSyxXQUFXLFFBQVEsTUFBTTtBQUNwQyxXQUFPLEdBQUcsS0FBSyxPQUFPLE9BQU8sT0FBTyxPQUFPLElBQUksY0FBYyxHQUFHLE9BQU8sQ0FBQztBQUFBLEVBQzNFO0FBQUEsRUFDRCxXQUFXLFFBQVE7QUFDZixRQUFJLE9BQU8sYUFBYSxhQUFhO0FBQ2pDLGFBQU8sUUFBUSxPQUFPLDJCQUEyQjtBQUFBLElBQ3BEO0FBQ0QsVUFBTSxXQUFXO0FBQ2pCLFVBQU0sV0FBVyxTQUFTLGVBQWUsUUFBUTtBQUNqRCxRQUFJLFVBQVU7QUFFVixhQUFPLFFBQVE7SUFDbEI7QUFDRCxVQUFNLE9BQU8sU0FBUyxxQkFBcUIsTUFBTSxFQUFFO0FBQ25ELFVBQU0sU0FBUyxTQUFTLGNBQWMsUUFBUTtBQUM5QyxXQUFPLElBQUksUUFBUSxhQUFXO0FBQzFCLGFBQU8sU0FB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
