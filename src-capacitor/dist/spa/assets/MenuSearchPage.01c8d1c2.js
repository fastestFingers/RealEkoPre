import{_ as q,l as C,m as _,n as Q,p as t,U as i,f as a,s,q as p,az as c,F as d,X as y,aX as v,b7 as x,as as S,Y as o,S as m,V as I,ad as A,a5 as f,t as F,a9 as V,aa as D,ab as P,ac as k,b1 as z}from"./index.f7d559c9.js";import{Q as B}from"./QToolbar.e8bab0fc.js";import{Q as M}from"./QHeader.26b1a527.js";import{Q as N}from"./QSpace.cb165838.js";import{Q as L}from"./QImg.04a8fde6.js";import{Q as b}from"./QItemLabel.4e494c2c.js";import{Q as O}from"./QList.559a09ed.js";import{Q as T}from"./QPage.026453a2.js";import{Q as E}from"./QFooter.2200c75f.js";import{u as j}from"./CartStore.42bb2db8.js";import"./QResizeObserver.fad9f3e9.js";const R={name:"MenuSearchPage",data(){return{q:"",data:[],slug:"",loading:!1,awaitingSearch:!1,money_config:[]}},setup(){return{CartStore:j()}},components:{ItemDetails:C(()=>F(()=>import("./ItemDetails.2e80d345.js"),["assets/ItemDetails.2e80d345.js","assets/index.f7d559c9.js","assets/index.661bbb30.css","assets/QCircularProgress.ea9c9417.js","assets/format.68d15b11.js","assets/QImg.04a8fde6.js","assets/QChip.75be2f9e.js","assets/QBtnToggle.b8808e61.js","assets/QBtnGroup.73e707aa.js","assets/QSelect.f548dfe7.js","assets/QItemLabel.4e494c2c.js","assets/QMenu.3887798d.js","assets/selection.4a59aca4.js","assets/rtl.0d66ec23.js","assets/QSpace.cb165838.js","assets/CartStore.42bb2db8.js","assets/FavoriteStore.4f11bec7.js","assets/DeliverySched.5943bd48.js"]))},mounted(){this.slug=this.$route.params.slug,this.Focus(),this.getMoneyConfig()},computed:{totalFound(){return Object.keys(this.data).length},hasData(){return Object.keys(this.data).length>0},isSearch(){return!_.empty(this.q)}},watch:{q(e,l){if(!this.awaitingSearch){if(typeof this.q=="undefined"||this.q===null||this.q===""||this.q==="null"||this.q==="undefined")return this.data=[],!1;setTimeout(()=>{_.menuSearch(this.q,this.slug).then(g=>{this.data=g.details.data}).catch(g=>{this.data=[]}).then(g=>{this.awaitingSearch=!1})},1e3)}this.awaitingSearch=!0}},methods:{Focus(){this.$refs.items.focus()},clearField(){this.q="",this.Focus()},onSearch(e){this.loading=e},onClickitem(e){const l={cat_id:e.cat_id,item_uuid:e.item_uuid};console.debug(e),this.$refs.item_details.showItem2(l,this.slug)},afterAdditems(){console.debug("afterAdditems"),this.CartStore.getCartCount()},getMoneyConfig(){_.getMoneyConfig().then(e=>{this.money_config=e.details}).catch(e=>{}).then(e=>{})}}},U={key:0,class:"q-pa-md"},X={key:0,class:"no-margin text-weight-bold q-pb-sm"},H={class:"no-margin text-weight-bold"},Y={class:"text-grey font13"},G={key:0,class:"q-mr-sm"},J={key:1,class:"q-mr-sm"},K={class:"row full-width items-center"},W={class:"col text-left"},Z=m("div",{class:"col text-weight-600"},"View Order",-1),$={class:"col text-right text-weight-bold"};function ee(e,l,g,h,n,u){const w=Q("ItemDetails");return t(),i(d,null,[a(M,null,{default:s(()=>[a(B,{class:"bg-white text-dark"},{default:s(()=>[a(y,{onClick:l[0]||(l[0]=r=>e.$router.back()),color:"white",rounded:"",unelevated:"","text-color":"dark",icon:"arrow_back",dense:"","no-caps":""}),a(v,{modelValue:n.q,"onUpdate:modelValue":l[2]||(l[2]=r=>n.q=r),ref:"items",label:e.$t("Search menu"),dense:"",outlined:"",color:"grey","bg-color":"white",class:"full-width input-borderless",loading:n.awaitingSearch},x({prepend:s(()=>[a(S,{name:"search"})]),_:2},[n.awaitingSearch?void 0:{name:"append",fn:s(()=>[u.isSearch?(t(),p(S,{key:0,onClick:l[1]||(l[1]=r=>u.clearField()),class:"cursor-pointer",name:"close"})):c("",!0)]),key:"0"}]),1032,["modelValue","label","loading"])]),_:1})]),_:1}),a(T,null,{default:s(()=>[a(N,{class:"q-pa-xs bg-grey-2"}),n.awaitingSearch?c("",!0):(t(),i(d,{key:0},[u.isSearch?(t(),i("div",U,[u.hasData?(t(),i("h5",X,o(e.$t("Search results for"))+" \u201C"+o(n.q)+"\u201D ("+o(u.totalFound)+") ",1)):(t(),i(d,{key:1},[m("h5",H,o(e.$t("No results for"))+" \u201C"+o(n.q)+"\u201D ",1),m("p",Y,o(e.$t("Sorry, no product matched for your search. Please try again.")),1)],64))])):c("",!0)],64)),n.awaitingSearch?c("",!0):(t(),p(O,{key:1},{default:s(()=>[(t(!0),i(d,null,I(n.data,r=>(t(),i(d,{key:r},[V((t(),p(P,{clickable:"",onClick:te=>u.onClickitem(r)},{default:s(()=>[a(k,{avatar:""},{default:s(()=>[a(L,{src:r.url_image,lazy:"",fit:"cover",style:{height:"50px",width:"50px"},class:"rounded-borders","spinner-color":"amber","spinner-size":"20px"},null,8,["src"])]),_:2},1024),a(k,null,{default:s(()=>[a(b,{lines:"1",class:"font12 text-weight-bold q-mb-sm"},{default:s(()=>[f(o(r.item_name),1)]),_:2},1024),a(b,{class:"font12 text-weight-medium"},{default:s(()=>[r.price[0]?(t(),i(d,{key:0},[r.price[0].discount<=0?(t(),i("span",G,o(r.price[0].size_name)+" "+o(r.price[0].pretty_price),1)):(t(),i("span",J,[f(o(r.price[0].size_name)+" ",1),m("del",null,o(r.price[0].pretty_price),1),f(" "+o(r.price[0].pretty_price_after_discount),1)]))],64)):c("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[D]]),a(z,{inset:""})],64))),128))]),_:1})),a(w,{ref:"item_details",slug:n.slug,money_config:n.money_config,onAfterAdditems:u.afterAdditems},null,8,["slug","money_config","onAfterAdditems"])]),_:1}),h.CartStore.hasData?(t(),p(E,{key:0,reveal:"",class:"bg-white q-pl-md q-pr-md q-pb-sm q-pt-sm text-dark"},{default:s(()=>[a(y,{to:"/cart",loading:h.CartStore.loading,unelevated:"",color:"primary","text-color":"dark","no-caps":"",class:"radius8 full-width"},{default:s(()=>[m("div",K,[m("div",W,[a(A,{square:"",size:"24px",color:"amber-2","text-color":"dark",class:"text-weight-bold rounded-borders"},{default:s(()=>[h.CartStore.data?(t(),i(d,{key:0},[f(o(h.CartStore.data.items_count),1)],64)):c("",!0)]),_:1})]),Z,m("div",$,[h.CartStore.data?(t(),i(d,{key:0},[f(o(h.CartStore.data.data.subtotal.value),1)],64)):c("",!0)])])]),_:1},8,["loading"])]),_:1})):c("",!0)],64)}var he=q(R,[["render",ee]]);export{he as default};
